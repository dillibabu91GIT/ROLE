this is my workflow


name: Deploy Database
on:
  workflow_dispatch:
    inputs:
      compile_date:
        description: 'Compile date to deploy'
        required: true
        type: string
jobs:
  deploy:
    runs-on: 
      group: rakbank-self-hosted-runner
      labels: dehitdevtra1
    steps:
      - name: Checkout mcf_db repository
        uses: actions/checkout@v4
        with:
          repository: rakbank-internal/mcf_db
          ref: ${{ github.event.inputs.branch }}
          #path: ansible-roles
          #token: ${{ secrets.TOKEN_GITHUB }}

      - name: Checkout second repository
        uses: actions/checkout@v4
        with:
          repository: rakbank-internal/enterprise-ansible-roles
          token: ${{ secrets.TOKEN_GITHUB }}
          path: ansible-roles
          ref: Feature

      #- name: Clone enterprise-ansible-roles repository
       # run: |
        #  if [ ! -d "../enterprise-ansible-roles" ]; then
         #   git clone https://github.com/rakbank-internal/enterprise-ansible-roles ../enterprise-ansible-roles
          #else
           # echo "Directory ../enterprise-ansible-roles already exists."
          #fi

      #- name: Debug Working Directory
       # run: |
        #  ls -al
         # pwd
      - name: Run Ansible Playbook
        env:
          TOKEN_GITHUB: ${{ secrets.TOKEN_GITHUB }}
          ORA_USERNAME: ${{ secrets.ORA_USERNAME }}
          ORA_PASSWORD: ${{ secrets.ORA_PASSWORD }}
          COMPILE_DATE: ${{ github.event.inputs.compile_date }}
        run: |
          cd ${{ github.workspace }}
          ansible-playbook -vvv -b -i inventory.ini ./playbook/mcfdbdeployment.yml --extra-vars "target=oracle_servers destination=${{ github.workspace }}"
------------------------

this is my playbook


- name: Deploy Database
  hosts: oracle_servers
  become: yes
  become_user: itdevtra

  tasks:
    - name: Read configuration from config.yml
      include_vars:
        file: "{{ destination }}/config.yml"
        name: config_vars

    - name: Include database-deployment-role
      include_role:
        name: database-deployment-role
        tasks_from: main-deploy.yml
      vars:
        oracle_host: "{{ config_vars.oracle_host }}"
        github_token: "{{ config_vars.github_token }}"
        username: "{{ config_vars.username }}"
        password: "{{ config_vars.password }}"
        ORACLE_SID: "{{ config_vars.ORACLE_SID }}"
        zip_file_name: "{{ config_vars.zip_file_name }}"
        zip_file_name_1: "{{ config_vars.zip_file_name_1 }}"
        ORACLE_HOME: "{{ config_vars.ORACLE_HOME }}"
        PATH: "{{ config_vars.PATH }}"
        oracle_deployment_dir: "{{ config_vars.oracle_deployment_dir }}"
---------------------------------
this is my ansible.cfg

[defaults]
host_key_checking=False
deprecation_warnings=False
ansible_ssh_common_args='-o StrictHostKeyChecking=no'
ansible_ssh_extra_args='-o StrictHostKeyChecking=no'
#roles_path = roles/
roles_path = ansible-roles/roles/
comment_warnings=False
command_warnings=False
inventory = inventory.ini
remote_user = ubuntu
interpreter_python=auto
ANSIBLE_DEPRECATION_WARNINGS=False
ANSIBLE_COMMAND_WARNINGS=False
allow_world_readable_tmpfiles=yes
timeout=30
ansible_pipelining=True
-------------------------------

this is config file
---
oracle_host: "10.15.25.168:5300"
github_token: "{{ lookup('env', 'TOKEN_GITHUB') }}"
owner: "rakbank-internal"
repo: "mcf_db"
branch: "RELEASE-DB-ROLE"
username: "{{ lookup('env', 'ORA_USERNAME') }}"
password: "{{ lookup('env', 'ORA_PASSWORD') }}"
ORACLE_SID: "CNVDGUAT"
zip_file_name: "/ansible/UAT_ARTIFACTS/UAT4/{{ lookup('env', 'COMPILE_DATE') }}/RAK_IB_CONVERGENCE_PATCHES_CR_UAT4/DB_SQL"
ORACLE_HOME: "/oracle19c/app/oracle/product/19.3.0/db_home"
PATH: "{{ ORACLE_HOME }}/bin:{{ PATH }}"
oracle_deployment_dir: "/backup"
...
------------------------------------------------
this is my inventory file
[all:vars]
ansible_user=itdevtra
ansible_ssh_port=22

[oracle_servers]
10.15.25.168
............................in above all file i have kept in one repository1



this is my role/tasks file this file i am kept in another repository1 

- name: Copy SQL files to Target Server
  copy:
    src: "{{ config.zip_file_name }}/DEPLOY.sql"
    dest: "{{ config.oracle_deployment_dir }}/DEPLOY.sql"
  when: config.zip_file_name is defined

    
- name: Deploy Database with custom timeout
  become: true
  become_user: itdevtra
  shell: |
    export ORACLE_HOME=/oracle19c/app/oracle/product/19.3.0/db_home
    export PATH=$ORACLE_HOME/bin:$PATH
    sqlplus -s {{ username }}/{{ password }}@{{ oracle_host }}/{{ ORACLE_SID }} @{{ oracle_deployment_dir }}/DEPLOY.sql | tee /tmp/deploy_output.log
    grep -q 'ORA-' /tmp/deploy_output.log && exit 1 || exit 0
  async: 60
  poll: 0
  register: deploy_result

- name: Wait for the deploy task to finish
  async_status:
    jid: "{{ deploy_result.ansible_job_id }}"
  register: job_result
  until: job_result.finished
  retries: 60
  delay: 1

so if i run means i am getting below error and also my concept is i want to call one repo to another repo i am trying


TASK [Include database-deployment-role] ****************************************
task path: /ansible/GITHUB_RUNNER/actions-runner10/_work/mcf_db/mcf_db/playbook/mcfdbdeployment.yml:12
TASK [database-deployment-role : Copy SQL files to Target Server] **************
task path: /ansible/GITHUB_RUNNER/actions-runner10/_work/mcf_db/mcf_db/ansible-roles/roles/database-deployment-role/tasks/main-deploy.yml:2
fatal: [10.15.25.168]: FAILED! => {
    "msg": "The conditional check 'config_vars.zip_file_name is defined' failed. The error was: An unhandled exception occurred while templating '{'oracle_host': '10.15.25.168:5300', 'github_token': \"{{ lookup('env', 'TOKEN_GITHUB') }}\", 'owner': 'rakbank-internal', 'repo': 'mcf_db', 'branch': 'RELEASE-DB-ROLE', 'username': \"{{ lookup('env', 'ORA_USERNAME') }}\", 'password': \"{{ lookup('env', 'ORA_PASSWORD') }}\", 'ORACLE_SID': 'CNVDGUAT', 'zip_file_name': \"/ansible/UAT_ARTIFACTS/UAT4/{{ lookup('env', 'COMPILE_DATE') }}/RAK_IB_CONVERGENCE_PATCHES_CR_UAT4/DB_SQL\", 'ORACLE_HOME': '/oracle19c/app/oracle/product/19.3.0/db_home', 'PATH': '{{ ORACLE_HOME }}/bin:{{ PATH }}', 'oracle_deployment_dir': '/backup'}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ config_vars.ORACLE_HOME }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{'oracle_host': '10.15.25.168:530
}
PLAY RECAP *********************************************************************
10.15.25.168               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
Error: Process completed with exit code 2.
